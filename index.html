<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JEE Study Tracker</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:#f5f7fb;
  color:#1f2937;
}
header{
  padding:26px;
  text-align:center;
  font-size:30px;
  font-weight:600;
  background:#a5b4fc;
  border-radius:0 0 34px 34px;
}
.container{padding:22px}
.card{
  background:#fff;
  border-radius:30px;
  padding:22px;
  margin-bottom:26px;
  box-shadow:0 14px 34px rgba(0,0,0,.08)
}
.subject-row{
  display:flex;
  gap:16px;
  margin:24px 0
}
.subject-row button{
  flex:1;
  padding:18px;
  font-size:20px;
  border:none;
  border-radius:30px;
  font-weight:600;
}
.physics{background:#c7d2fe}
.chemistry{background:#bbf7d0}
.maths{background:#e9d5ff}

.progress{
  height:18px;
  background:#e5e7eb;
  border-radius:12px;
  overflow:hidden;
  margin-top:10px
}
.progress div{
  height:100%;
  background:#6366f1;
  width:0%
}

.section-title{
  font-weight:600;
  font-size:22px;
  margin:18px 0 10px
}

input{
  width:100%;
  padding:16px;
  font-size:18px;
  border-radius:22px;
  border:1px solid #d1d5db;
  margin-top:10px
}

.chapter-row{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  margin:14px 0
}
.chapter-row span{font-size:18px}
.chapter-row input{
  width:24px;
  height:24px;
  accent-color:#6366f1
}

.hidden{display:none}

.top-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px
}
.menu{
  font-size:28px;
  cursor:pointer;
}

button{
  cursor:pointer;
  font-family:inherit;
}

.big-reset{
  width:100%;
  padding:20px;
  font-size:20px;
  border-radius:32px;
  border:none;
  background:linear-gradient(135deg,#fb7185,#f43f5e);
  color:white;
  font-weight:600;
}

/* MODALS */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:20
}
.modal-box{
  background:white;
  border-radius:26px;
  padding:22px;
  width:90%;
  max-width:420px
}
.modal-box button{
  width:100%;
  margin-top:10px;
  padding:14px;
  font-size:18px;
  border-radius:20px;
  border:none
}
.menu-btn{background:#e5e7eb}
.danger{background:#fb7185;color:white}
.small-btn{
  padding:12px;
  font-size:16px;
  border:none;
  border-radius:20px;
  background:#6366f1;
  color:white;
  margin-top:18px;
  width:100%
}
</style>
</head>

<body>

<header>üìò JEE Study Tracker</header>

<!-- HOME -->
<div class="container" id="home">
  <div class="card">
    <div class="section-title">üéØ Daily Goals</div>
    <input id="goalInput" placeholder="Type chapter & press Enter">
    <div id="dailyGoals"></div>
  </div>

  <div class="card">
    <b>‚ö° Physics</b>
    <div class="progress"><div id="pBar"></div></div>
    <div id="pText"></div>
  </div>

  <div class="card">
    <b>üß™ Chemistry</b>
    <div class="progress"><div id="cBar"></div></div>
    <div id="cText"></div>
  </div>

  <div class="card">
    <b>üìê Mathematics</b>
    <div class="progress"><div id="mBar"></div></div>
    <div id="mText"></div>
  </div>

  <div class="subject-row">
    <button class="physics" onclick="openSubject('physics')">‚ö° Physics</button>
    <button class="chemistry" onclick="openSubject('chemistry')">üß™ Chemistry</button>
    <button class="maths" onclick="openSubject('maths')">üìê Maths</button>
  </div>

  <button class="big-reset" onclick="resetAll()">Reset ALL Progress</button>
</div>

<!-- SUBJECT -->
<div class="container hidden" id="subject">
  <div class="top-bar">
    <h2 id="subTitle"></h2>
    <div class="menu" onclick="openMenu()">‚ãÆ</div>
  </div>
  <div id="chapters"></div>
  <button class="small-btn" onclick="goHome()">‚¨Ö Back to Home</button>
</div>

<!-- MENU MODAL -->
<div class="modal hidden" id="menuModal">
  <div class="modal-box">
    <button class="menu-btn" onclick="openAdd()">‚ûï Add Chapter</button>
    <button class="menu-btn" onclick="openRemove()">‚ùå Remove Chapters</button>
    <button class="danger" onclick="resetSubject()">‚ôª Reset Subject</button>
    <button onclick="closeModals()">Cancel</button>
  </div>
</div>

<!-- ADD MODAL -->
<div class="modal hidden" id="addModal">
  <div class="modal-box">
    <h3>Add Chapter</h3>
    <input id="addInput" placeholder="Chapter name">
    <button onclick="confirmAdd()">Add</button>
    <button onclick="closeModals()">Cancel</button>
  </div>
</div>

<!-- REMOVE MODAL -->
<div class="modal hidden" id="removeModal">
  <div class="modal-box">
    <h3>Remove Chapters</h3>
    <div id="removeList"></div>
    <button class="danger" onclick="confirmRemove()">Remove Selected</button>
    <button onclick="closeModals()">Cancel</button>
  </div>
</div>

<script>
/* ================= DATA ================= */

const DEFAULT_DATA={
physics:["Vectors","Kinematics","NLM","Work Power Energy","Rotation","Gravitation","Thermodynamics","Waves","Electrostatics","Current Electricity","Magnetism","Optics","Modern Physics"],
chemistry:["Mole Concept","Atomic Structure","Thermodynamics","Equilibrium","Electrochemistry","Periodic Table","Chemical Bonding","GOC","Hydrocarbons"],
maths:["Quadratic","Sequence & Series","Trigonometry","Straight Line","Circle","Conics","Limits","Derivatives","Integrals","Vectors","3D","Probability"]
};

let data=JSON.parse(localStorage.getItem("jeeData"))||DEFAULT_DATA;
let daily=JSON.parse(localStorage.getItem("jeeDaily"))||{physics:[],chemistry:[],maths:[]};
let currentSub=null;

const $=id=>document.getElementById(id);

/* ================= INIT ================= */

window.addEventListener("load",()=>{
  closeModals();
  updateProgress();
  renderDaily();
});

/* ================= NAV ================= */

function openSubject(sub){
  currentSub=sub;
  $("home").classList.add("hidden");
  $("subject").classList.remove("hidden");
  $("subTitle").innerText=sub.toUpperCase();
  renderChapters();
}

function goHome(){
  currentSub=null;
  $("subject").classList.add("hidden");
  $("home").classList.remove("hidden");
  closeModals();
  updateProgress();
}

/* ================= CHAPTERS ================= */

function renderChapters(){
  const box=$("chapters");
  box.innerHTML="";
  data[currentSub].forEach(ch=>{
    const row=document.createElement("div");
    row.className="chapter-row";
    const name=document.createElement("span");
    name.innerText=ch;
    const cb=document.createElement("input");
    cb.type="checkbox";
    cb.checked=localStorage.getItem(currentSub+ch)==="1";
    cb.onchange=()=>{
      localStorage.setItem(currentSub+ch,cb.checked?"1":"");
      updateProgress();
    };
    row.append(name,cb);
    box.append(row);
  });
}

/* ================= MENU ================= */

function openMenu(){
  if(!currentSub) return;
  $("menuModal").classList.remove("hidden");
}

function openAdd(){
  closeModals();
  $("addModal").classList.remove("hidden");
}

function openRemove(){
  closeModals();
  const list=$("removeList");
  list.innerHTML="";
  data[currentSub].forEach((ch,i)=>{
    const row=document.createElement("div");
    const cb=document.createElement("input");
    cb.type="checkbox";
    cb.dataset.i=i;
    row.append(cb," ",ch);
    list.append(row);
  });
  $("removeModal").classList.remove("hidden");
}

function closeModals(){
  ["menuModal","addModal","removeModal"].forEach(id=>$(id).classList.add("hidden"));
}

/* ================= ACTIONS ================= */

function confirmAdd(){
  const v=$("addInput").value.trim();
  if(!v) return;
  data[currentSub].push(v);
  $("addInput").value="";
  save();
  closeModals();
  renderChapters();
  updateProgress();
}

function confirmRemove(){
  [...$("removeList").querySelectorAll("input:checked")]
  .map(c=>+c.dataset.i)
  .sort((a,b)=>b-a)
  .forEach(i=>data[currentSub].splice(i,1));
  save();
  closeModals();
  renderChapters();
  updateProgress();
}

function resetSubject(){
  if(!confirm("Reset all progress for this subject?")) return;
  data[currentSub].forEach(c=>localStorage.removeItem(currentSub+c));
  closeModals();
  renderChapters();
  updateProgress();
}

function resetAll(){
  if(!confirm("This will delete ALL progress. Continue?")) return;
  localStorage.clear();
  location.reload();
}

/* ================= DAILY GOALS ================= */

$("goalInput").addEventListener("keydown",e=>{
  if(e.key!=="Enter") return;
  const v=e.target.value.toLowerCase();
  if(!v) return;
  Object.keys(data).forEach(s=>{
    data[s].forEach(c=>{
      if(c.toLowerCase().includes(v) && !daily[s].includes(c))
        daily[s].push(c);
    });
  });
  e.target.value="";
  save();
  renderDaily();
});

function renderDaily(){
  $("dailyGoals").innerHTML="";
  Object.keys(daily).forEach(s=>{
    if(!daily[s].length) return;
    const title=document.createElement("div");
    title.className="section-title";
    title.innerText=s.toUpperCase();
    $("dailyGoals").append(title);
    daily[s].forEach((ch,i)=>{
      const row=document.createElement("div");
      row.className="chapter-row";
      const name=document.createElement("span");
      name.innerText=ch;
      const cb=document.createElement("input");
      cb.type="checkbox";
      cb.onchange=()=>{
        localStorage.setItem(s+ch,"1");
        daily[s].splice(i,1);
        save();
        renderDaily();
        updateProgress();
      };
      row.append(name,cb);
      $("dailyGoals").append(row);
    });
  });
}

/* ================= PROGRESS ================= */

function updateProgress(){
  [["physics","pBar","pText"],["chemistry","cBar","cText"],["maths","mBar","mText"]]
  .forEach(([s,b,t])=>{
    let done=0;
    data[s].forEach(c=>localStorage.getItem(s+c)==="1" && done++);
    let pct=Math.round(done/data[s].length*100)||0;
    $(b).style.width=pct+"%";
    $(t).innerText=`${done}/${data[s].length} chapters (${pct}%)`;
  });
}

function save(){
  localStorage.setItem("jeeData",JSON.stringify(data));
  localStorage.setItem("jeeDaily",JSON.stringify(daily));
}
</script>
</body>
</html>

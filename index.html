<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JEE Study Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#6366f1">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Poppins,sans-serif;background:#f5f7fb;color:#1f2937;font-size:19px}
header{padding:26px;text-align:center;font-size:30px;font-weight:600;background:#a5b4fc;border-radius:0 0 34px 34px}
.container{padding:22px}
.card{background:#ffffff;border-radius:30px;padding:22px;margin-bottom:26px;box-shadow:0 14px 34px rgba(0,0,0,.08)}
.subject-row{display:flex;gap:18px;margin:24px 0}
.subject-row button{flex:1;padding:20px;font-size:22px;border:none;border-radius:34px;font-weight:600;cursor:pointer}
.physics{background:#c7d2fe}
.chemistry{background:#bbf7d0}
.math{background:#e9d5ff}
.progress{height:18px;background:#e5e7eb;border-radius:12px;overflow:hidden;margin-top:10px}
.progress div{height:100%;background:#6366f1;width:0%}
.hidden{display:none}
input{width:100%;padding:18px;font-size:19px;border-radius:26px;border:1px solid #d1d5db;margin:14px 0}
.section-title{font-weight:600;font-size:22px;margin:18px 0 10px}
.big-reset{width:100%;padding:22px;font-size:22px;border-radius:36px;border:none;background:linear-gradient(135deg,#fb7185,#f43f5e);color:white;font-weight:600;cursor:pointer;margin-top:28px}
.back-btn{margin-top:26px;padding:18px;font-size:20px;border-radius:30px;border:none;background:#c7d2fe;cursor:pointer;width:100%}
.chapter-row{display:grid;grid-template-columns:1fr auto;align-items:center;margin:14px 0}
.chapter-row span{font-size:20px}
.chapter-row input{width:26px;height:26px;border-radius:8px;accent-color:#6366f1}
.top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
canvas{margin-top:20px}
</style>
</head>
<body>
<header>ğŸ“˜ JEE Study Tracker</header>

<div class="container" id="home">
  <div class="card">
    <div class="section-title">ğŸ¯ Daily Goals</div>
    <input id="goalInput" placeholder="Type chapter name">
    <div id="dailyGoals"></div>
  </div>

  <div class="card">
    <b>âš¡ Physics</b>
    <div class="progress"><div id="pBar"></div></div>
    <div id="pText"></div>
    <button onclick="resetSubject('physics')">Reset Physics</button>
  </div>

  <div class="card">
    <b>ğŸ§ª Chemistry</b>
    <div class="progress"><div id="cBar"></div></div>
    <div id="cText"></div>
    <button onclick="resetSubject('chemistry')">Reset Chemistry</button>
  </div>

  <div class="card">
    <b>ğŸ“ Mathematics</b>
    <div class="progress"><div id="mBar"></div></div>
    <div id="mText"></div>
    <button onclick="resetSubject('maths')">Reset Maths</button>
  </div>

  <div class="subject-row">
    <button class="physics" onclick="openSub('physics')">âš¡ Physics</button>
    <button class="chemistry" onclick="openSub('chemistry')">ğŸ§ª Chemistry</button>
    <button class="math" onclick="openSub('maths')">ğŸ“ Maths</button>
  </div>

  <button class="big-reset" onclick="resetAll()">Reset ALL Progress</button>
</div>

<div class="container hidden" id="subject">
  <div class="top-bar">
    <h2 id="subTitle"></h2>
  </div>
  <div id="chapters"></div>
  <button onclick="goHome()" class="back-btn">â¬… Back to Home</button>
</div>

<script>
// Complete chapter data with numbering
const defaultData={
physics:["U & D","Vectors","Kinematics-1D","Kinematics-2D","NLM","Friction","Circular motion","WPE","Center of Mass","Rotational Mechanics","Gravitation","SHM","Calorimetry","Elasticity","Thermal Expansion","Heat transfer","KTG","Thermodynamics","Wave on string","Sound waves","Fluid Mechanics","Physical World","Electrostatics","Current Electricity","Capacitance","MEC","Magnetism","EMI","AC","Atomic Structure","Dual Nature","Nuclear physics","Radioactivity","Ray Optics","EM Waves","Wave Optics","Errors","Semiconductor","Communication System"],
chemistry:["General Chemistry","Atomic Structure","States of Matter","Thermodynamics","Chemical Equilibrium","Redox Reaction","Ionic Equilibrium","Mole Concept","Thermochemistry","The Solid State","Liquid Solution","Chemical Kinetics","Nuclear Chemistry","Radioactivity","Electro Chemistry","Surface Chemistry","Periodic Table","Chemical Bonding","Hydrogen","s-Block Elements","p-Block Elements","Metallurgy","d & f Block","Coordination Compounds","Salt Analysis","IUPAC","GOC","Isomerism","Hydrocarbons","Environmental Chemistry","Optical Isomerism","Halogen Derivative","Alcohol, Phenol, Ether","Aldehydes, Ketones","Carboxylic Acids & Amines","Biomolecules","Polymers","Oxidation Reduction","Chem. in Everyday Life"],
maths:["Logarithm","Trigonometric Ratios & Identities","Quadratic Equation","Sequence & Series","Trigonometric Equation","Properties of Triangles","Height and Distance","Point","Straight Line","Circle","Parabola","Ellipse","Hyperbola","P & C","Binomial Theorem","Complex Number","Statistics","PMI","MR","Sets","Relation","Function","ITF","Limit","Continuity","Differentiability","MOD (Diff.)","AOD","Indefinite Integration","Definite Integration","Area Under Curve","Differential Equation","Matrices","Determinant","Vectors","3-Dimensional","Probability","Linear Programming"]
};

let data=JSON.parse(localStorage.getItem('chaptersData'))||defaultData;
let daily={physics:[],chemistry:[],maths:[]};
let currentSub="";

function save(){localStorage.setItem('chaptersData',JSON.stringify(data))}

function openSub(s){
  currentSub=s;
  home.classList.add('hidden');
  subject.classList.remove('hidden');
  subTitle.innerText=s.toUpperCase();
  renderChapters();
}

function renderChapters(){
  const box=document.getElementById('chapters');
  box.innerHTML="";
  data[currentSub].forEach((ch,i)=>{
    const row=document.createElement('div');
    row.className='chapter-row';
    const name=document.createElement('span');
    name.innerText=`${i+1}. ${ch}`;
    const cb=document.createElement('input');
    cb.type='checkbox';
    cb.checked=localStorage.getItem(currentSub+ch)==='1';
    cb.onchange=()=>{localStorage.setItem(currentSub+ch,cb.checked?'1':'');updateProgress()};
    row.append(name,cb);
    box.append(row);
  });
}

function goHome(){
  subject.classList.add('hidden');
  home.classList.remove('hidden');
  updateProgress();
}

function updateProgress(){
  [['physics','pBar','pText'],['chemistry','cBar','cText'],['maths','mBar','mText']].forEach(([s,b,t])=>{
    let done=0;
    data[s].forEach(c=>{if(localStorage.getItem(s+c)==='1')done++});
    let pct=Math.round(done/data[s].length*100)||0;
    document.getElementById(b).style.width=pct+'%';
    document.getElementById(t).innerText=`${done}/${data[s].length} chapters (${pct}%)`
  });
}

function resetSubject(s){
  if(confirm(`Are you sure you want to reset ${s.toUpperCase()} progress?`)){
    data[s].forEach(c=>localStorage.removeItem(s+c));
    updateProgress();
  }
}

function resetAll(){
  if(confirm("Are you sure you want to reset all progress?")){
    localStorage.clear();
    location.reload();
  }
}

// Daily Goals
goalInput.oninput=function(){
  const v=this.value.toLowerCase();
  daily={physics:[],chemistry:[],maths:[]};
  if(!v)return;
  Object.keys(data).forEach(s=>{
    data[s].forEach(c=>{
      if(c.toLowerCase().includes(v)) daily[s].push(c);
    });
  });
  renderDaily();
}

function renderDaily(){
  dailyGoals.innerHTML="";
  Object.keys(daily).forEach(s=>{
    if(daily[s].length){
      const title=document.createElement('div');
      title.className='section-title';
      title.innerText=s.toUpperCase();
      dailyGoals.append(title);
      daily[s].forEach((ch,i)=>{
        const row=document.createElement('div');
        row.className='chapter-row';
        const name=document.createElement('span');
        name.innerText=ch;
        const cb=document.createElement('input');
        cb.type='checkbox';
        cb.onchange=()=>{
          localStorage.setItem(s+ch,'1');
          daily[s].splice(i,1);
          renderDaily();
          updateProgress();
        };
        row.append(name,cb);
        dailyGoals.append(row);
      });
    }
  });
}

renderDaily();
updateProgress();

// Service Worker registration for PWA
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw.js').then(()=>console.log('Service Worker Registered'));
}
</script>
</body>
</html>
